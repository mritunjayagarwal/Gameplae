<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="icon" href="img/clash.png">
  <title>Profile</title>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/2.3.11/css/skins/skin-black.css">
  <script src = "https://cdnjs.cloudflare.com/ajax/libs/admin-lte/2.3.11/js/app.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/2.3.11/css/AdminLTE.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/2.3.11/css/skins/skin-blue.css">

  <link rel="stylesheet" href="/css/reset.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/user.css">
</head>
<body class="hold-transition sidebar-mini">
  <!-- Site wrapper -->
  <div class="wrapper">
    <%- include("./partials/header.ejs") %>
      <aside class="main-sidebar">
          <!-- sidebar: style can be found in sidebar.less -->
          <section class="sidebar">
              <form action="#" method="get" class="sidebar-form" target="_blank">
                  <div class="input-group m-2 mt-4">
                      <input type="text" name="id" id = "search" class="form-control bg-dark" placeholder="How may I help?" style = "border: 0;">
                      <span class="input-group-btn bg-dark mr-2">
                          <button type="submit" name="search" id="search-btn" class="btn btn-flat"><i class="fa fa-search"></i>
                          </button>
                      </span>
                  </div>
              </form>
              <!-- sidebar menu: : style can be found in sidebar.less -->
              <ul class="sidebar-menu">
                  <li class="header text-center" style = "color: #808080">Tournaments</li>
                  <% _.forEach(games, (game) => { %>
                    <li id = "Gname"><a href="/tournaments/<%= game.name %>"><i class="fas fa-gamepad" style = "background: -webkit-linear-gradient(#02e097, #06619B);font-weight: bold;background-clip: text;-webkit-background-clip: text;-webkit-text-fill-color: transparent;"></i> <span style = "color: #D3D3D3;font-weight: bolder;"><%= game.name %></span><span class = "badge badge-primary badge-pill pull-right"><%= game.tournaments.length %></span></a></li>
                  <% }) %>
              </ul>
          </section>
          <!-- /.sidebar -->
      </aside>
      <!-- =============================================== -->
      <!-- Content Wrapper. Contains page content -->
      <div class="content-wrapper" style = "background: #0E0E10">
          <div class = "loader"></div>
          <section class="content">
                <div class="row">
                    <div class="col-12">
                        <div class="mb-3 coverBackground">
                            <div class="row">
                                <div class="col-12">
                                    <a class="position-absolute ml-3 mt-3 text-white" href="setting.html" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Edit cover images"><i class="fas fa-cog"></i></a>
                                    <div class="row">
                                        <div class="col-md-6 ml-auto mr-auto">
                                        <div class="profiles p-3 my-4 rounded text-center">
                                                <div class="avatars">
                                                    <a href="setting.html">
                                                        <img src="https://demo.bootstrap.news/bootnews/assets/img/avatar/avatar1.png" alt="Circle Image" class="avatar-lg rounded-circle img-fluid" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Edit avatar images">
                                                    </a>
                                                </div>
                                                <div class="names">
                                                    <h3 class="title text-light mt-2 text-capitalize"><%= vUser.name %></h3>
                                                    <!-- <a href="#" class="btn btn-link btn-facebook"><i class="fab fa-facebook"></i></a>
                                                    <a href="#" class="btn btn-link btn-twitter"><i class="fab fa-twitter"></i></a>
                                                    <a href="#" class="btn btn-link btn-gplus"><i class="fab fa-google-plus"></i></a>
                                                    <a href="#" class="btn btn-link btn-instagram"><i class="fab fa-instagram"></i></a>
                                                    <a href="#" class="btn btn-link btn-youtube"><i class="fab fa-youtube"></i></a> -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <ul id="tabsJustified" class="nav nav-tabs nav-fill mt-3 mb-0">
                                <li class="nav-item" style = "background: #0E0E10"><a href="" data-target="#upcoming" data-toggle="tab" class="nav-link small text-uppercase active btn btn-dark">Profile</a></li>
                                <% if(user){ %>
                                    <li class="nav-item" style = "background: #0E0E10"><a href="" data-target="#messages1" data-toggle="tab" class="nav-link small text-uppercase btn btn-dark">Edit</a></li>
                                <% } %>
                            </ul>
                        </div>
                    </div>
                </div>
                <div id="tabsJustifiedContent" class="tab-content">
                    <div id="upcoming" class="tab-pane fade active show">
                        <div class = "row">
                            <div class = "col-sm-6">
                                <ul class="list-group mt-3">
                                    <li class="list-group-item text-muted bg-dark text-default text-center" contenteditable="false">‚ù§Ô∏è Basic Information</li>
                                    <li class="list-group-item text-right bg-dark text-light"><span class="pull-left"><strong>Full Name</strong></span><%= vUser.name %></li>
                                    <li class="list-group-item text-right bg-dark text-light"><span class="pull-left"><strong>Joined</strong></span>24th July 2020</li>
                                </ul>
                                <ul class="list-group mt-3">
                                    <li class="list-group-item text-muted bg-dark text-default text-center" contenteditable="false">üèÜ Tournament Info</li>
                                    <li class="list-group-item text-right bg-dark text-light"><span class="pull-left"><strong>Tournaments Played</strong></span><%= vUser.tournament.length %></li>
                                    <li class="list-group-item text-right bg-dark text-light"><span class="pull-left"><strong>Level</strong></span>5</li>
                                    <li class="list-group-item text-right bg-dark text-light"><span class="pull-left"><strong>Tournaments Won</strong></span>12</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <% if(user){ %>
                        <div id="messages1" class="tab-pane fade active">
                            <div class="container py-2">
                                <div class="row my-2">
                                    <!-- edit form column -->
                                    <div class="col-lg-4">
                                        <h2 class="text-center font-weight-light">User Profile</h2>
                                    </div>
                                    <div class="col-lg-8">
                                        <div class="alert alert-info alert-dismissable"> <a class="panel-close close" data-dismiss="alert">√ó</a> This is an <strong>.alert</strong>. Use this to show important messages to the user. </div>
                                    </div>
                                    <div class="col-lg-8 order-lg-1 personal-info">
                                        <form role="form">
                                            <div class="form-group row">
                                                <label class="col-lg-3 col-form-label form-control-label">First name</label>
                                                <div class="col-lg-9">
                                                    <input class="form-control" type="text" value="Jane" />
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-lg-3 col-form-label form-control-label">Last name</label>
                                                <div class="col-lg-9">
                                                    <input class="form-control" type="text" value="Bishop" />
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-lg-3 col-form-label form-control-label">Email</label>
                                                <div class="col-lg-9">
                                                    <input class="form-control" type="email" value="email@gmail.com" />
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-lg-3 col-form-label form-control-label">Company</label>
                                                <div class="col-lg-9">
                                                    <input class="form-control" type="text" value="" />
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-lg-3 col-form-label form-control-label">Website</label>
                                                <div class="col-lg-9">
                                                    <input class="form-control" type="url" value="" />
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-lg-3 col-form-label form-control-label">Address</label>
                                                <div class="col-lg-9">
                                                    <input class="form-control" type="text" value="" placeholder="Street" />
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-lg-3 col-form-label form-control-label"></label>
                                                <div class="col-lg-6">
                                                    <input class="form-control" type="text" value="" placeholder="City" />
                                                </div>
                                                <div class="col-lg-3">
                                                    <input class="form-control" type="text" value="" placeholder="State" />
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-lg-3 col-form-label form-control-label">Time Zone</label>
                                                <div class="col-lg-9">
                                                    <select id="user_time_zone" class="form-control" size="0">
                                                        <option value="Hawaii">(GMT-10:00) Hawaii</option>
                                                        <option value="Alaska">(GMT-09:00) Alaska</option>
                                                        <option value="Pacific Time (US &amp; Canada)">(GMT-08:00) Pacific Time (US &amp; Canada)</option>
                                                        <option value="Arizona">(GMT-07:00) Arizona</option>
                                                        <option value="Mountain Time (US &amp; Canada)">(GMT-07:00) Mountain Time (US &amp; Canada)</option>
                                                        <option value="Central Time (US &amp; Canada)" selected="selected">(GMT-06:00) Central Time (US &amp; Canada)</option>
                                                        <option value="Eastern Time (US &amp; Canada)">(GMT-05:00) Eastern Time (US &amp; Canada)</option>
                                                        <option value="Indiana (East)">(GMT-05:00) Indiana (East)</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-lg-3 col-form-label form-control-label">Username</label>
                                                <div class="col-lg-9">
                                                    <input class="form-control" type="text" value="janeuser" />
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-lg-3 col-form-label form-control-label">Password</label>
                                                <div class="col-lg-9">
                                                    <input class="form-control" type="password" value="11111122333" />
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-lg-3 col-form-label form-control-label">Confirm password</label>
                                                <div class="col-lg-9">
                                                    <input class="form-control" type="password" value="11111122333" />
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <div class="col-lg-9 ml-auto text-right">
                                                    <input type="reset" class="btn btn-outline-secondary" value="Cancel" />
                                                    <input type="button" class="btn btn-primary" value="Save Changes" />
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="col-lg-4 order-lg-0 text-center">
                                        <img src="//api.adorable.io/avatars/120/trickst3r.png" class="mx-auto img-fluid rounded-circle" alt="avatar" />
                                        <h6 class="my-4">Upload a new photo</h6>
                                        <div class="input-group px-xl-4">
                                            <div class="custom-file">
                                                <input type="file" class="custom-file-input" id="inputGroupFile02">
                                                <label class="custom-file-label" for="inputGroupFile02" aria-describedby="inputGroupFileAddon02">Choose file</label>
                                            </div>
                                            <div class="input-group-append">
                                                <button class="btn btn-secondary"><i class="fa fa-upload"></i></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <% } %>
                </div>
          </section>
          <%- include("./partials/modals.ejs") %>                
      </div>
  <% if(upi.rnum && upi.holder){ %>
    <script>
      $('#newUpi').hide();  
    </script>
  <% } %>
  <% if(successMsg){ %>
    <script>
    $(document).ready(function(){
        $("#successModal").modal('show');
    });
    </script>
  <% } %>
  <script>
    document.onreadystatechange = function() { 
    if (document.readyState !== "complete") { 
        document.querySelector(".loader").style.visibility = "visible"; 
        document.querySelector("body").style.visibility = "hidden"; 
    } else { 
        document.querySelector(".loader").style.display = "none";
        document.querySelector("body").style.visibility = "visible"; 
    } 
  };
  </script>
  <% if(pay){ %>
    <script>
      $(document).ready(function(){
      function validateUpi(pVal, hVal, aVal){
          if(pVal && hVal && aVal){
                $('#upiSubmit').removeAttr("disabled");
                $('#upiSubmit').html("Submit Request")
                $('#upiSubmit').removeClass('btn-danger');
                $('#upiSubmit').addClass('btn-primary');
            }else{
              $('#upiSubmit').attr("disabled", "true");
              $('#upiSubmit').html("Fix All the errors");
              $('#upiSubmit').removeClass('btn-primary');
                $('#upiSubmit').addClass('btn-danger');
            }
      }
        
      var $regexname=/^([0-9]{10})$/;
      var pVal = false;
      var hVal = false;
      var aVal = false;
      $('.phVal').on('keypress keydown keyup',function(){
              if (!$(this).val().match($regexname)) {
                  $('.pVal').removeClass('hidden');
                  $('.pVal').show();
                  pVal = false;
                  validateUpi(pVal, hVal, aVal);
              }
            else{
                  $('.pVal').addClass('hidden');
                  pVal = true;
                  validateUpi(pVal, hVal, aVal);
                  }
                });

      $('.hoVal').on('keypress keydown keyup',function(){
          if (!$(this).val().match(/^([a-z A-Z]{2,100})$/)) {
              $('.hVal').removeClass('hidden');
              $('.hVal').show();
              hVal = false;
              validateUpi(pVal, hVal, aVal)
          }
        else{
              $('.hVal').addClass('hidden');
              hVal = true;
              validateUpi(pVal, hVal, aVal)
              }
            });
              
      $('.amVal').on('keypress keydown keyup',function(){
                if (parseInt("<%= user.wallet %>") < $('.amVal').val()) {

                    $('.aVal').removeClass('hidden');
                    $('.aVal').show();
                    aVal = false;
                    validateUpi(pVal, hVal, aVal)
                }
              else{
                  $('.aVal').addClass('hidden');
                  aVal = true;
                  validateUpi(pVal, hVal, aVal)
                }
            });
        });
    </script>  
  <% } %>
  <script src = "/js/wallet.js"></script>
</body>
</html>