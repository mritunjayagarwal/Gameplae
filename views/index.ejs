<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>SlingShot</title>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  <!-- Latest compiled and minified CSS -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/2.3.11/css/skins/skin-black.css">
  <script src = "https://cdnjs.cloudflare.com/ajax/libs/admin-lte/2.3.11/js/app.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/2.3.11/css/AdminLTE.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/2.3.11/css/skins/skin-green.css">

  <link rel="stylesheet" href="/css/reset.css">
  <link rel="stylesheet" href="/css/glide.core.css">
  <link rel="stylesheet" href="/css/glide.theme.min.css">
  <link rel="stylesheet" href="/css/styleindex.css">
</head>
<body class="hold-transition sidebar-mini">
  <!-- Site wrapper -->
  <div class="wrapper">
      <header class="main-header">
          <!-- Logo -->
          <a href="#" class="logo">
              <!-- mini logo for sidebar mini 50x50 pixels -->
              <span class="logo-mini"><b>SS</b></span>
              <!-- logo for regular state and mobile devices -->
              <span class="logo-lg" style = "background: -webkit-linear-gradient(#02e097, #06619B);font-weight: bold;background-clip: text;-webkit-background-clip: text;-webkit-text-fill-color: transparent;"><i class = "fas fa-crown"></i> SlingShot</span>
          </a>
          <!-- Header Navbar: style can be found in header.less -->
          <nav class="navbar navbar-static-top" style = "height: 49px;background: #101010;">
              <!-- Sidebar toggle button-->
              <a href="#" class = "sidebar-toggle pt-2" data-toggle="offcanvas" role="button">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
              </a>
              <% if(user){ %>
                <ul class = "list-inline active">
                  <li class = "list-inline-item">
                    <span style = "font-size: 30px;"><i class = "fas fa-wallet" id = "wallet"></i> <strong style = "color: #fff" id = "wallet">â‚¹<%= user.wallet %></strong></strong>
                  </li>  
                  <li class="list-inline-item">
                      <div class="dropdown dropleft">
                                <img src="/img/avatar.png" alt="avatar" id="dropdownMenuButton" data-toggle="dropdown" style = "width: 40px;height:auto;">
                          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <a class="dropdown-item" href="/profile/<%= user._id %>">Your Profile</a>
                            <a class="dropdown-item" href="/logout">Logout</a>
                          </div>
                        </div>
                  </li>
                  </ul>
              <% }else{ %>
                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item active">
                          <a class="nav-link" href="/signup"><i class = "fa fa-user"></i> Signup</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="/login">Login</a>
                        </li>
                      </ul>
                  <% } %>
          </nav>
      </header>
      <!-- =============================================== -->
      <!-- Left side column. contains the sidebar -->
      <aside class="main-sidebar">
          <!-- sidebar: style can be found in sidebar.less -->
          <section class="sidebar">
              <!-- search form -->
              <form action="#" method="get" class="sidebar-form" target="_blank">
                  <div class="input-group m-2 mt-3">
                      <input type="text" name="id" id = "search" class="form-control bg-dark" placeholder="How may I help?" style = "border: 0;">
                      <span class="input-group-btn bg-dark">
                          <button type="submit" name="search" id="search-btn" class="btn btn-flat"><i class="fa fa-search"></i>
                          </button>
                      </span>
                  </div>
              </form>
              <!-- /.search form -->
              <!-- sidebar menu: : style can be found in sidebar.less -->
              <ul class="sidebar-menu">
                  <li class="header">Main Pages</li>
                  <% _.forEach(games, (game) => { %>
                    <li id = "Gname"><a href="/tournaments/<%= game.name %>"><i class="fas fa-gamepad"></i> <span style = "color: #D3D3D3;font-weight: bolder;"><%= game.name %></span><span class = "badge badge-primary badge-pill pull-right"><%= game.tournaments.length %></span></a></li>
                  <% }) %>
                  <li class="header">Everything Else</li>
                  <!-- <li class="treeview">
                      <a href="#"><i class="fas fa-file-text-o fa-fw"></i>
                          <span>Individual Pages</span>
                          <span class="pull-right-container"><i class="fa fa-angle-left pull-right"></i></span>
                      </a>
                      <ul class="treeview-menu">
                          <li><a href="#"><i class="fa fa-user-circle"></i> <span>Foo</span></a></li>
                      </ul>
                  </li> -->
              </ul>
          </section>
          <!-- /.sidebar -->
      </aside>
      <!-- =============================================== -->
      <!-- Content Wrapper. Contains page content -->
      <div class="content-wrapper" style = "background: #0E0E10">
          <!-- Main content -->
          <section class="content">
                  <div>
                    <div class="gliderr">
                      <div class="glide__track" data-glide-el="track">
                        <ul class="glide__slides">
                          <li class="glide__slide"><img src = "/img/adv2.jpg" style = "width: 100%;height: auto;"></li>
                          <li class="glide__slide"><img src = "/img/adv1.jpg" style = "width: 100%;height: auto;"></li>
                          <li class="glide__slide"><img src = "/img/pubgadv.jpg" style = "width: 100%;height: auto;"></li>
                          <li class="glide__slide"><img src = "/img/pubgadv2.jpg" style = "width: 100%;height: auto;"></li>
                        </ul>
                      </div>
                    </div>
            
                <div class = "jumbotron">
                    <h1 class = "h1" id = "mainHead">Upcoming</h1>
                    <% _.forEach(games, (game) => { %>
                      <div class = "py-3 my-3" >
                        <h3 class = "h3" id = "gameHead"><%= game.name %></h3>
                        <div class = "row">
                          <div class="glide">
                              <div class="glide__track" data-glide-el="track">
                                <ul class="glide__slides">
                                  <% _.forEach(game.tournaments, (tournament) => { %>
                                    <% if(tournament.starts >= new Date()){ %>
                                      <a href = "/tournament/<%= tournament._id %>" style = "text-decoration: none;">
                                        <li class="glide__slide">
                                            <div class="card" style="max-width: 540px;background:#252525">
                                                <div class="row no-gutters">
                                                  <div class="col-md-4">
                                                    <img src="/img/<%= game.face %>" class="card-img" id = "face" style = "width:100%;height:auto;">
                                                  </div>
                                                  <div class="col-md-8">
                                                    <div class="card-body" style = "margin-top: -10px;">
                                                      <h5 class="card-title" style = "color:#d3d3d3"><%= tournament.name %></h5>
                                                      <div class="row">
                                                        <div class="col"><p class="card-text mb-2" id = "con"><i class="fa fa-calendar" style = "color:gold;font-size:12px;margin-bottom: 10px;"></i> &nbsp; <%= moment(tournament.starts).format('l'); %></p></div>
                                                        <div class="col"><p class="card-text" id = "con"><i class="fa fa-trophy" style = "color:gold;font-size:15px;"></i> &nbsp;  â‚¹â€Ž1000 </p></div>
                                                        <div class="w-100"></div>
                                                        <div class="col"><p class="card-text" id = "con"><i class="	fa fa-money" style = "color:gold;font-size:15px;"></i> &nbsp;  â‚¹â€Ž<%= tournament.price %>/kill</p></div>
                                                        <div class="col"><p class="card-text" id = "con"><i class="	fa fa-users" style = "color:gold;font-size:15px;"></i> &nbsp;  <%= tournament.players.length %>/<%= tournament.participants %></p></div>
                                                      </div>
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>
                                          </li>
                                        </a> 
                                    <% } %>
                                  <% }) %>
                                </ul>
                              </div>
                            </div>
                        </div>
                      </div>
                    <% }) %>
                </div>
              </div>
          </section>
          <!-- /.content -->
      </div>
      <!-- /.content-wrapper
      <footer class="main-footer"></footer> -->
  </div>
  <script src="https://cdn.jsdelivr.net/npm/@glidejs/glide"></script>
  <script>
  
  var sliders = document.querySelectorAll('.glide');
  var config = {
    type: 'carousel',
    perView: 3,
    breakpoints: {
      1200: {
        perView: 2
      },
      1000: {
        perView: 2
      },
      639: {
        perView: 1,
        peek: {
          before: 0,
          after: 120
        },
        gap: 10
      },
      400: {
        perView: 1,
        peek: {
          before: 0,
          after: 80
        },
        gap: 10
      },
      360: {
        perView: 1,
        peek: {
          before: 0,
          after: 30
        },
      }
    }
  }
  for (var i = 0; i < sliders.length; i++) {
    var glide = new Glide(sliders[i],config);
    
    glide.mount();
  }
  </script>
  <script>
    var newConfig = {
      type: 'carousel',
      perView: 1,
      gap: 15,
      focusAt: 'center',
      peek: 290,
      breakpoints: {
        1200: {
          peek: 100
        },
        1000: {
          peek: 100,
          gap: 7
        },
        600: {
          peek: 30,
          gap: 5
        },
        350: {
          peek: 20,
          gap: 5
        }
      }
    }
    new Glide(".gliderr", newConfig).mount();
  </script>
</body>
</html>